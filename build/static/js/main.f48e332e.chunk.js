(this["webpackJsonptwitter-front"]=this["webpackJsonptwitter-front"]||[]).push([[0],{24:function(e,t,a){e.exports=a(41)},32:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(3),o=a(12),l=a(1),s=a(2),i=a.n(s),m=a(4),u="https://twitter-cvs.herokuapp.com/api",d=function(){return void 0!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},p=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/signin"),{method:"POST",headers:{Accept:"Application/json","Content-type":"Application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==typeof window){localStorage.removeItem("jwt");try{fetch("".concat(u,"/signout"),{method:"GET"})}catch(a){console.log(a)}t()}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify(t)});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){return e.location.pathname===t?{color:"#007bff"}:{color:"#FFFFFF"}},E=n.a.memo(Object(o.g)((function(e){var t=e.history,a=function(e,t,a,r){return n.a.createElement("div",{className:"col-12 h5 p-2"},n.a.createElement(c.b,{style:a(r,t),to:t},e))};return n.a.createElement("div",{className:"row rounded-lg shadow-lg bg-dark text-white text-center my-3 mx-1"},!d()&&n.a.createElement(o.a,{to:"signin"}),a("Home","/",h,t),d()?a("Profile","/me",h,t):null,d()?null:a("SignUp","/signup",h,t),d()?n.a.createElement("div",{className:"h5 col-12 p-2 text-danger",onClick:function(){f((function(){t.push("/")}))}},"Logout"):a("SignIn","/signin",h,t))})));a(32);function v(e){var t=e.children;return n.a.createElement("div",{className:"container"},t)}var g=a(9),w=a(6),N=d(),y=N.user,j=N.token,x=function(){var e=Object(m.a)(i.a.mark((function e(t,a,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/tweet/create/").concat(a),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(r)},body:t});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/timeline/").concat(y.username),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(j)}});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/tweets/").concat(t),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(j)}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/tweet/").concat(t,"/replies"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(j)}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/tweet/").concat(a,"/reply"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(j)},body:JSON.stringify({text:t})});case 3:return r=e.sent,e.abrupt("return",r.json());case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}();function A(e){var t=e.className,a=e.username,r=e.resolution,c="".concat(u,"/profile/").concat(a,"/picture");console.log(c);var o=c||"https://img.icons8.com/color/480/000000/twitter.png";return n.a.createElement("img",{src:o,alt:"",style:r,className:"mb-3 rounded ".concat(t)})}function I(){var e=Object(r.useState)({tweet:"",picture:void 0,formData:""}),t=Object(l.a)(e,2),a=t[0],c=t[1],o=a.formData,s=(a.picture,a.tweet),i=Object(r.useState)(""),m=Object(l.a)(i,2),u=m[0],p=m[1],f=Object(r.useState)(!1),b=Object(l.a)(f,2),h=b[0],E=b[1],v=d(),N=v.user,y=v.token,j=function(e){return function(t){p("");var r="picture"===e?t.target.files[0]:t.target.value;o.set(e,r),c(Object(w.a)({},a,Object(g.a)({},e,r)))}};Object(r.useEffect)((function(){c({formData:new FormData})}),[]);return n.a.createElement("div",{className:"row border border-right-0 border-left-0 border-dark py-2"},n.a.createElement("div",{className:"col-2"},n.a.createElement("div",{className:"col-2 py-2 "},n.a.createElement(A,{username:N.username,info:"main",className:"rounded-circle",resolution:{maxWidth:"80px"}}))),n.a.createElement("div",{className:"col-10"},n.a.createElement("form",{className:"my-2"},n.a.createElement("div",{className:"form-row align-items-center "},n.a.createElement("div",{className:"form-group col-md-12"},n.a.createElement("textarea",{className:"form-control bg-transparent border border-dark text-white mx-1",rows:"3",maxLength:"200",onChange:j("tweet"),value:s,placeholder:"What's happning?"})),n.a.createElement("div",{className:"form-group col-md-3"},n.a.createElement("div",{className:"form-group  rounded-lg p-0 border border-primary"},n.a.createElement("input",{type:"file",onChange:j("picture"),className:"form-control p-1 bg-primary  border border-primary"}))),n.a.createElement("div",{className:"form-group col-md-6"},h?n.a.createElement("span",{className:"progress"},n.a.createElement("span",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})):n.a.createElement("p",{className:"text-warning"},u)),n.a.createElement("div",{className:"form-group col-md-3"},n.a.createElement("button",{onClick:function(e){return t=e,N.username,t.preventDefault(),p(""),void(s&&(E(!0),x(o,N.username,y).then((function(e){e.error&&p(e.error),E(!1),c(Object(w.a)({},a,{tweet:"",picture:void 0})),window.location.href="/user/".concat(N.username)})).catch((function(e){E(!1),c(Object(w.a)({},a,{tweet:"",picture:void 0}))}))));var t},type:"submit",className:"btn btn-primary mx-3 px-3 rounded-pill"},"Submit"))))))}var F=function(){var e=d().user;return n.a.createElement("div",{className:"row justify-content-center "},n.a.createElement("div",{className:"col-12"},n.a.createElement("div",{className:"card rounded-lg bg-dark shadow my-1",style:{width:"18rem"}},n.a.createElement(A,{username:e.username,className:"rounded-circle border border-primary",resolution:{width:"100%"}}),n.a.createElement("div",{className:"card-body text-white text-left"},n.a.createElement("h4",{className:"card-title"},e.name),n.a.createElement("p",{className:"card-text py-1"},e.bio),n.a.createElement(c.b,{to:"/user/".concat(e.username),className:"h5 text-info"},"@",e.username)))))},U=a(11),B=a.n(U);function T(e){var t=e.reply,a=d(),r=a.user,o=a.token,l=function(){var e=Object(m.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/reply/").concat(t._id,"/delete"),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(o)}});case 3:if(!(a=e.sent).error){e.next=6;break}return e.abrupt("return",console.log(a.error));case 6:return e.abrupt("return",window.location.href=window.location.href);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"col-11 bg-dark p-3 my-1 "},n.a.createElement("div",{className:"row justify-content-right"},n.a.createElement("div",{className:"col-1"},n.a.createElement(A,{username:t.userId.username,className:"rounded-circle border border-white",resolution:{width:"25px",height:"25px"}})),n.a.createElement("div",{className:"col-10"},n.a.createElement(c.b,{className:"font-weight-bold h6 text-white mx-1",to:"/user/".concat(t.userId.username)},t.userId.name),n.a.createElement("span",{className:"text-white-50 "},B()(t.createdAt).format("lll")),(t.userId._id===r._id||t.to===r._id)&&n.a.createElement("span",{className:"m-1 material-icons text-danger",onClick:l},"delete"))),n.a.createElement("div",{className:"row justify-content-center mx-2 "},n.a.createElement("div",{className:"col-10 text-white"},n.a.createElement("p",null,t.text))))}function _(e){var t=e.tweetId,a=Object(r.useState)(""),c=Object(l.a)(a,2),o=c[0],s=c[1];return n.a.createElement("div",{className:"col-11 bg-dark p-3 my-2 "},n.a.createElement("div",{className:"row justify-content-right"},n.a.createElement("div",{className:"col-10"},n.a.createElement("div",{className:"form-group"},n.a.createElement("textarea",{className:"form-control bg-transparent border border-primary text-white",rows:"2",maxLength:"100",onChange:function(e){var t=e.target.value;s(t)},value:o,placeholder:"What's happning?"})))),n.a.createElement("div",{className:"row justify-content-right"},n.a.createElement("div",{className:"col-3"},n.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(e){e.preventDefault(),o&&C(o,t).then((function(e){if(e.error)return console.log(e.error);window.location.href=window.location.href})).catch((function(e){return console.log("Reply fail")}))}},"Reply"))))}function L(e){var t=e.className,a=e.tweetId,r=e.resolution,c="".concat(u,"/tweet/").concat(a,"/picture"),o=c||"https://img.icons8.com/color/480/000000/twitter.png";return n.a.createElement("img",{src:o,alt:"",style:r,className:"mb-3 rounded ".concat(t)})}a(34);function D(){return n.a.createElement("span",{class:"lds-heart"},n.a.createElement("span",null))}function P(e){var t=e.tweet,a=Object(r.useState)({liked:t.liked,likes:t.likes}),o=Object(l.a)(a,2),s=o[0],p=o[1],f=Object(r.useState)(!1),b=Object(l.a)(f,2),h=b[0],E=b[1],v=Object(r.useState)([]),g=Object(l.a)(v,2),w=g[0],N=g[1],y=s.liked,j=s.likes,x=d(),O=x.user,k=x.token,C=Object(r.useState)(!1),I=Object(l.a)(C,2),F=I[0],U=I[1],P=Object(r.useState)(!1),R=Object(l.a)(P,2),z=R[0],J=R[1];Object(r.useEffect)((function(){U(!0),h&&S(t._id).then((function(e){return e.error?console.log(e.error):(U(!1),N(e.reverse()))})).catch((function(e){console.log(e)}))}),[h,j]);var G=function(){var e=Object(m.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/tweet/").concat(t._id,"/delete"),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(k)}});case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return",console.log(a.error));case 5:window.location.href=window.location.href;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"row border-bottom border-secondary py-3 justify-content-center    "},n.a.createElement("div",{className:"col-1"},n.a.createElement(A,{className:"rounded-circle",username:t.userId.username,resolution:{maxWidth:"40px",maxHeight:"40px"}})),n.a.createElement("div",{className:"col-11"},n.a.createElement("div",{className:"row align-item-center px-2"},n.a.createElement("div",{className:"col-12"},n.a.createElement(c.b,{className:"font-weight-bold h5 text-white ",to:"/user/".concat(t.userId.username)},t.userId.name),n.a.createElement("span",{className:"text-white-50 px-1"},"@",t.userId.username),n.a.createElement(c.b,{to:"/".concat(t.userId.username,"/tweets/").concat(t._id),className:"text-white-50 px-2"},B()(t.createdAt).format("LLL")),t.userId._id===O._id&&n.a.createElement("span",{className:" material-icons text-secondary m-1",onClick:G},"delete")),n.a.createElement("div",{className:"col-12 py-2"},n.a.createElement("p",{className:"text-white"},t.tweet)),n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-10 py-1 mx-5"},n.a.createElement(L,{tweetId:t._id,resolution:{width:"100%"}}))),n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:" offset-1 col-3 "},n.a.createElement("span",{onClick:function(){E(!h)},className:"text-white-50 mx-4"},n.a.createElement("span",{class:"material-icons text-primary my-1"},"mode_comment"))),n.a.createElement("div",{onClick:function(){J(!0),fetch("".concat(u,"/tweet/").concat(t._id,"/react"),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(k)},body:JSON.stringify({})}).then((function(e){p({likes:y?j-1:j+1,liked:!y}),J(!1)})).catch((function(e){return console.log(e)}))},className:"col-4 mx-4 my-1   ".concat(y?"text-danger":"text-white-50")},n.a.createElement("p",null,z?n.a.createElement(D,null):n.a.createElement(r.Fragment,null,n.a.createElement("span",{class:"material-icons"},y?"favorite":"favorite_border"),j||"")))))),h&&n.a.createElement(r.Fragment,null,n.a.createElement(_,{tweetId:t._id}),F?n.a.createElement("p",{className:"text-primary h5"},"Loading..."):w.map((function(e){return n.a.createElement(T,{reply:e,key:e._id})}))))}function R(e){var t=e.user;return n.a.createElement("div",{className:"row align-item-center my-1"},n.a.createElement("div",{className:"col-12 "},n.a.createElement("span",{className:"font-weight-bold h6 text-white px-1"},t.to.name),n.a.createElement(c.b,{className:"text-secondary",to:"/user/".concat(t.to.username)},"@",t.to.username)))}var z=d(),J=z.user,G=z.token,q=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/profile/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-type":"application/json",Authorization:"Bearer ".concat(G)}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(m.a)(i.a.mark((function e(t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/profile/").concat(t,"/edit"),{method:"PUT",headers:{Accept:"application/json","Content-type":"application/json",Authorization:"Bearer ".concat(G)},body:JSON.stringify(a)});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,fetch("".concat(u,"/profile/").concat(J.username,"/upload/picture"),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(G)},body:t});case 4:return a=e.sent,e.abrupt("return",console.log(a));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",console.log(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/following/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-type":"application/json",Authorization:"Bearer ".concat(G)}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function K(){return n.a.createElement("span",{className:"progress m-3"},n.a.createElement("span",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}}))}a(35);function M(){return n.a.createElement("div",{class:"lds-hourglass"})}var Q=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)([]),i=Object(l.a)(s,2),m=i[0],u=i[1],p=Object(r.useState)(!1),f=Object(l.a)(p,2),b=f[0],h=f[1],g=Object(r.useState)(!1),w=Object(l.a)(g,2),N=w[0],y=w[1],j=d().user;Object(r.useEffect)((function(){y(!0),d()&&(Y(j.username).then((function(e){e.error&&(y(!1),h(e.error)),u(e)})),O().then((function(e){e.error&&(y(!1),h(e.error)),y(!1),c(e)})))}),[]);return n.a.createElement("div",null,!j&&n.a.createElement(o.a,{to:"/signin"}),n.a.createElement(v,null,j&&n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-2"},n.a.createElement(E,null)),n.a.createElement("div",{className:"col-6 "},n.a.createElement("div",{className:"row  border border-top-0 border-bottom-0 border-dark p-0"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h4",{className:"text-white px-3 py-2"},"Home"),n.a.createElement(I,null),N?n.a.createElement(K,null):a.length>0?a.map((function(e){return n.a.createElement(P,{tweet:e,key:e._id})})):n.a.createElement("h1",{className:"text-white"},b)),n.a.createElement("div",{className:"col-12"}))),n.a.createElement("div",{className:"col-4"},n.a.createElement("div",{className:"row position-fixed"},n.a.createElement("div",{className:"col-12 "},N?n.a.createElement(M,null):n.a.createElement(F,null)),n.a.createElement("div",{className:"col-12 my-2"},n.a.createElement("div",{className:"card rounded-lg border-0",style:{width:"18rem"}},n.a.createElement("div",{className:"card-header bg-primary text-center text-white h4 "},"Following"),n.a.createElement("ul",{className:"list-group list-group-flush"},m.map((function(e){return n.a.createElement("li",{className:"list-group-item bg-dark text-white",key:e._id},n.a.createElement(R,{user:e}))}))))))))))},V=function(e,t){return n.a.createElement("div",{className:"Error"===t?"alert alert-danger":"alert alert-success"},n.a.createElement("h5",null,e))};a(36);function X(){return n.a.createElement("div",{class:"lds-grid"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null))}var Z=function(){var e=Object(r.useState)({email:"vardhan4@gmail.com",password:"123456",error:"",loading:!1,didRedirect:!1}),t=Object(l.a)(e,2),a=t[0],s=t[1],i=a.email,m=a.password,u=a.error,f=a.loading,b=(a.didRedirect,d().user,function(e){return function(t){s(Object(w.a)({},a,Object(g.a)({error:!1},e,t.target.value)))}});return n.a.createElement("div",null,n.a.createElement(v,null,n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-4"},n.a.createElement("form",{className:"my-5"},u&&V(u,"Error"),n.a.createElement("h1",{className:"text-center text-white my-5"},"Sign In"),f?n.a.createElement(X,null):n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-white"},"Email address"),n.a.createElement("input",{type:"email",name:"email",onChange:b("email"),className:"form-control",placeholder:"Email",required:!0,value:i})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-white"},"Password"),n.a.createElement("input",{required:!0,name:"password",onChange:b("password"),placeholder:"Password",type:"password",value:m,className:"form-control"}))),n.a.createElement("button",{onClick:function(e){e.preventDefault(),s(Object(w.a)({},a,{error:!1,loading:!0})),p({email:i,password:m}).then((function(e){e.error?s(Object(w.a)({},a,{error:e.error,loading:!1})):function(e,t){void 0!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){s(Object(w.a)({},a,{didRedirect:!0}))}))})).catch((function(e){return console.log("Signin Failed!")}))},className:"btn btn-lg btn-primary btn-block rounded-pill my-2 "},"Sign In"),function(){if(d())return n.a.createElement(o.a,{to:"/me"})}()),n.a.createElement(c.b,{to:"/signup",className:"btn btn-lg btn-secondary btn-block rounded-pill my-2 "},"Sign Up")))))},$=n.a.memo((function(){var e=Object(r.useState)({email:"",password:"",name:"",error:"",loading:!1,didRedirect:!1}),t=Object(l.a)(e,2),a=t[0],s=t[1],i=a.email,m=a.password,u=a.name,p=a.error,f=a.loading,h=a.didRedirect,E=(d().user,function(e){return function(t){s(Object(w.a)({},a,Object(g.a)({error:!1},e,t.target.value)))}});return n.a.createElement("div",null,n.a.createElement(v,null,n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-4"},n.a.createElement("form",{className:"my-5"},p&&V(p,"Error"),n.a.createElement("h1",{className:"text-center text-white my-5"},"Sign Up"),f?n.a.createElement(X,null):n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-white"},"Name"),n.a.createElement("input",{type:"text",onChange:E("name"),className:"form-control",placeholder:"Name",required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-white"},"Email address"),n.a.createElement("input",{required:!0,type:"email",onChange:E("email"),className:"form-control",placeholder:"Email"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-white"},"Password"),n.a.createElement("input",{onChange:E("password"),placeholder:"Password",type:"password",className:"form-control",required:!0}))),n.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),s(Object(w.a)({},a,{error:!1,loading:!0})),b({email:i,password:m,name:u}).then((function(e){e.error?s(Object(w.a)({},a,{error:e.error,loading:!1})):s(Object(w.a)({},a,{didRedirect:!0}))})).catch((function(e){s(Object(w.a)({},a,{error:"SignUp Failed!"}))}))},className:"btn btn-lg btn-primary btn-block rounded-pill my-2 "},"Sign Up"),function(){if(h)return n.a.createElement(o.a,{to:"/signin"})}()),n.a.createElement(c.b,{to:"/signin",className:"btn btn-lg btn-secondary btn-block rounded-pill my-2 "},"Sign In")))))}));function ee(e){var t=e.userData,a=d(),r=a.user,o=a.token,l=t.username,s=r.username===l;return n.a.createElement("div",{className:"row border border-top-0 border-bottom-0 border-dark bg-dark p-2"},n.a.createElement("div",{className:"col-3"},n.a.createElement(A,{className:"p-1 rounded-circle",username:t.username,resolution:{width:"100%",minHeight:"100px"}}),s?n.a.createElement(c.b,{to:"/upload/profile",className:"btn btn-block btn-primary rounded-pill"},"Upload Image"):null),n.a.createElement("div",{className:"col-7 p-4"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("span",null,n.a.createElement("span",{className:"text-white h3 p-1"},t.name),n.a.createElement("span",{className:"text-light h6 p-1"},"@",t.username))),n.a.createElement("div",{className:"col-10"},n.a.createElement("p",{className:"text-light p-1 py-2"},t.bio)),n.a.createElement("div",{className:"col-2"},s?n.a.createElement(c.b,{to:"/user/update/".concat(l),className:"btn btn-primary rounded-pill my-2"},"Update"):n.a.createElement("button",{onClick:function(){fetch("".concat(u,"/follow/").concat(l),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({})}).then((function(e){e.error&&console.log(e.error),window.location.href=window.location.href}))},className:"btn btn-primary rounded-pill my-2"},t.youFollow?"Unfollow":t.followYou?"Follow Back":"Follow")),n.a.createElement("div",{className:"col-12"},n.a.createElement("p",{className:"text-info px-1 font-weight-bold"},"Birth : ",B()(t.birthdate).calendar()),n.a.createElement("p",{className:"text-info px-1 font-weight-bold"},"Location : ",t.location)),n.a.createElement("div",{className:"col-12 px-4 py-1"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-4 text-dark shadow-lg font-weight-bold bg-light py-1 text-center mx-1 rounded-pill  "},"Following",n.a.createElement("b",null," : ",t.following)),n.a.createElement("div",{className:"col-4 text-dark shadow-lg font-weight-bold bg-light p-1 text-center mx-1 rounded-pill  "},"Followers",n.a.createElement("b",null," : ",t.followers)))))))}function te(e){var t=e.match,a=Object(r.useState)({}),s=Object(l.a)(a,2),i=s[0],m=s[1],u=Object(r.useState)([]),p=Object(l.a)(u,2),f=p[0],b=p[1],h=Object(r.useState)([]),g=Object(l.a)(h,2),w=g[0],N=g[1],y=Object(r.useState)(!1),j=Object(l.a)(y,2),x=(j[0],j[1]),O=Object(r.useState)(!1),S=Object(l.a)(O,2),C=S[0],A=S[1],I=Object(r.useState)(!1),F=Object(l.a)(I,2),U=F[0],B=F[1],T=Object(r.useState)(!1),_=Object(l.a)(T,2),L=_[0],D=_[1],z=d().user,J=t.params.username?t.params.username:z.username;Object(r.useEffect)((function(){A(!0),B(!0),D(!0),d()&&(Y(J).then((function(e){if(e.error)return x(e.error),console.log(e.error);N(e),D(!1)})).catch((function(e){D(!1)})),k(J).then((function(e){if(e.error)return B(!1),console.log(e.error);b(e),B(!1)})).catch((function(e){B(!1)})),q(J).then((function(e){if(e.error)return A(!1),m(null),console.log(e.error);m(e),A(!1)})).catch((function(e){m(null),A(!1)})))}),[J]);return n.a.createElement("div",null,n.a.createElement(v,null,d()?n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-2"},n.a.createElement(E,null)),n.a.createElement("div",{className:"col-10 "},C?n.a.createElement("div",{className:"row border border-top-0 border-bottom-0 border-dark bg-dark p-2"},n.a.createElement(M,null)):i?n.a.createElement(ee,{userData:i}):n.a.createElement(o.a,{to:"/me"}),n.a.createElement("div",{className:"row  border border-top-0 border-bottom-0 border-dark p-0"},n.a.createElement("div",{className:"col-8 "},U?n.a.createElement(K,null):f.length>0?f.map((function(e){return n.a.createElement(P,{tweet:e,key:e._id})})):n.a.createElement("h1",{className:"text-white"},"No tweets found!!")),n.a.createElement("div",{className:"col-4"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"card rounded-lg border-0 my-2",style:{width:"100%"}},n.a.createElement("div",{className:"card-header bg-primary text-center text-white h4 "},"Following"),L?n.a.createElement("div",{className:"bg-dark"},n.a.createElement(M,null)):n.a.createElement(r.Fragment,null,n.a.createElement("ul",{className:"list-group list-group-flush"},w.map((function(e){return n.a.createElement("li",{className:"list-group-item bg-dark text-white",key:e._id},n.a.createElement(R,{user:e}))})))))))))):n.a.createElement("div",{className:"row justify-content-center text-center"},n.a.createElement("div",{className:"col-2"},n.a.createElement(E,null)),n.a.createElement("div",{className:"col-6"},n.a.createElement("img",{src:"https://img.icons8.com/color/480/000000/twitter.png",alt:""}),n.a.createElement("div",{className:"h1 text-white"},"Twitter"),n.a.createElement(c.b,{to:"/signin",className:"btn btn-primary"},"Signin")))))}function ae(e){var t=e.match,a=Object(r.useState)(""),s=Object(l.a)(a,2),i=s[0],m=s[1],u=d().user,p=Object(r.useState)({}),f=Object(l.a)(p,2),b=f[0],h=f[1],E=Object(r.useState)(!1),v=Object(l.a)(E,2),N=v[0],y=v[1],j=Object(r.useState)(!1),x=Object(l.a)(j,2),O=x[0],k=x[1],S=t.params.username===u.username;Object(r.useEffect)((function(){y(!0),q(u.username).then((function(e){if(e.error)return console.log(e.error);h(e),y(!1)})).catch((function(e){return console.log(e)}))}),[]);var C=function(e){return function(t){var a=t.target.value;m(""),h(Object(w.a)({},b,Object(g.a)({},e,a)))}};return S?n.a.createElement("div",{className:"container my-5 py-5"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h5",{className:" text-white text-center"},i)),n.a.createElement("div",{className:"col-4"}),N?n.a.createElement(M,null):n.a.createElement("div",{className:"col-4  border border-primary p-4 text-left text-white"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12 py-2"},n.a.createElement("label",null,"Name : "),n.a.createElement("input",{type:"text",value:b.name,className:"form-control",onChange:C("name")})),n.a.createElement("div",{className:"col-12 py-2"},n.a.createElement("label",null,"Username : "),n.a.createElement("input",{type:"text",value:b.username,className:"form-control",onChange:C("username")})),n.a.createElement("div",{className:"col-12 py-2"},n.a.createElement("label",{className:"text-light p-1 py-2"},"Bio"),n.a.createElement("textarea",{onChange:C("bio"),className:"form-control",value:b.bio,rows:"3"})),n.a.createElement("div",{className:"col-12 py-2"},n.a.createElement("label",null,"Birth : ",B()(b.birthdate).calendar()),n.a.createElement("input",{type:"date",className:"form-control",onChange:C("birthdate")})),n.a.createElement("div",{className:"col-12 py-2"},n.a.createElement("label",null,"Location "),n.a.createElement("input",{type:"text",value:b.location,className:"form-control",onChange:C("location")})),n.a.createElement("div",{className:"col-12 py-2"},n.a.createElement("button",{onClick:function(){H(u.username,b).then((function(e){if(e.error)return m("Failed ! ( Username is Taken )"),console.log(e.err);console.log("Updated");var t=JSON.parse(localStorage.getItem("jwt"));return t.user=Object(w.a)({},t.user,{bio:b.bio,username:b.username,name:b.name,location:b.location,birthdate:b.birthdate}),localStorage.setItem("jwt",JSON.stringify(t)),k(!0)})).catch((function(e){console.log(e)}))},className:"btn btn-primary btn-block rounded-pill my-2"},"Update"),n.a.createElement(c.b,{to:"/user/".concat(t.params.username),className:"btn btn-warning btn-block rounded-pill my-2"},"Cancel"))))),O&&n.a.createElement(o.a,{path:"/me"})):n.a.createElement(o.a,{to:"/user/".concat(u.username)})}var re=a(22),ne=a.n(re);a(37);function ce(){var e=Object(r.useState)(),t=Object(l.a)(e,2),a=t[0],s=t[1],u=Object(r.useState)(null),d=Object(l.a)(u,2),p=d[0],f=d[1],b=Object(r.useState)({unit:"px",aspect:1}),h=Object(l.a)(b,2),E=h[0],v=h[1],g=Object(r.useState)(),w=Object(l.a)(g,2),N=w[0],y=w[1],j=Object(r.useState)(""),x=Object(l.a)(j,2),O=x[0],k=x[1],S=Object(r.useState)(!1),C=Object(l.a)(S,2),A=C[0],I=C[1],F=Object(r.useState)(!1),U=Object(l.a)(F,2),B=U[0],T=U[1],_=Object(r.useCallback)((function(e){f(e)}),[]),L=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p&&t.width&&t.height&&D(p,t,"newFile.jpeg");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(m.a)(i.a.mark((function e(t,a,r){var n,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),c=t.naturalWidth/t.width,o=t.naturalHeight/t.height,n.width=a.width,n.height=a.height,n.getContext("2d").drawImage(t,a.x*c,a.y*o,a.width*c,a.height*o,0,0,a.width,a.height),e.abrupt("return",new Promise((function(e,t){n.toBlob((function(e){e?(e.name=r,console.log(e),k(e),window.URL.revokeObjectURL(N),y(window.URL.createObjectURL(e))):t(new Error("Canvas is empty"))}),"image/jpeg")})));case 8:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"container my-5"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-4"},n.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return s(t.result)})),t.readAsDataURL(e.target.files[0])}},className:" form-control my-1"}))),n.a.createElement("div",{className:"row justify-content-center align-items-center"},n.a.createElement("div",{className:"col-7"},n.a.createElement(ne.a,{src:a,onImageLoaded:_,crop:E,onChange:function(e){return v(e)},onComplete:L})),n.a.createElement("div",{className:"col-5"},N&&n.a.createElement("img",{alt:"Crop preview",src:N}))),n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-2"},n.a.createElement("button",{onClick:function(){T(!0);var e="";(e=new FormData).set("picture",O),W(e).then((function(e){T(!1),I(!0)})).catch((function(e){T(!1),I(!0)}))},disabled:!N,className:"btn btn-block btn-primary my-1"},B?"Uploading...":"Upload")),n.a.createElement("div",{className:"col-2"},n.a.createElement(c.b,{to:"/me",className:"btn btn-block btn-danger my-1"},"Cancel")),A&&n.a.createElement(o.a,{to:"/me"})))}var oe=function(){return n.a.createElement(c.a,null,n.a.createElement(o.d,null,n.a.createElement(o.b,{path:"/",exact:!0,component:Q}),n.a.createElement(o.b,{path:"/signin",exact:!0,component:Z}),n.a.createElement(o.b,{path:"/signup",exact:!0,component:$}),d()&&n.a.createElement(o.b,{path:"/user/:username",exact:!0,component:te}),d()&&n.a.createElement(o.b,{path:"/me",exact:!0,component:te}),d()&&n.a.createElement(o.b,{path:"/upload/profile",exact:!0,component:ce}),d()&&n.a.createElement(o.b,{path:"/user/update/:username",exact:!0,component:ae})))},le=a(23);a.n(le).a.render(n.a.createElement(oe,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.f48e332e.chunk.js.map